# Cloudflare R2 Setup

## Prerequisites

Set these environment variables:

```bash
export CLOUDFLARE_ACCOUNT_ID=your-32-char-hex-account-id
export CLOUDFLARE_EMAIL=your-cloudflare-email@example.com
export CLOUDFLARE_GLOBAL_API_KEY=your-global-api-key
```

**Finding credentials:**
- **Account ID**: Found in Cloudflare dashboard URL or R2 Overview page (32 hex characters)
- **Email**: Your Cloudflare account email
- **Global API Key**: [My Profile > API Tokens](https://dash.cloudflare.com/profile/api-tokens) > Global API Key > View

## Usage

### Basic Upload
```bash
npm run as -- text --video "https://www.youtube.com/watch?v=MORMZXEaONk" \
  --whisper large-v3-turbo \
  --chatgpt gpt-4o-mini \
  --save r2
```

### Custom Bucket Prefix
```bash
npm run as -- text --rss "https://ajcwebdev.substack.com/feed" \
  --last 3 \
  --save r2 \
  --s3-bucket-prefix "my-r2-content"
```

### Batch Processing
```bash
npm run as -- text --playlist "https://www.youtube.com/playlist?list=PLCVnrVv4KhXPz0SoAVu8Rc1emAdGPbSbr" \
  --deepgram nova-2 \
  --claude claude-3-5-haiku-latest \
  --save r2
```

## R2 Features

- **Zero egress fees**: No charges for downloading files
- **S3-compatible API**: Works with existing S3 tools
- **Global distribution**: Automatic edge caching via Cloudflare network